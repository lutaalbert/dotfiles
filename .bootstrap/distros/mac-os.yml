---
# In case we'll need to tap repos in the future
#
# (font-hack-nerd-font was moved from tap to main homebrew, so tapping is unnecessary)
# - name: Tap Homebrew repositories
#   community.general.homebrew_tap:
#     name: homebrew/cask-fonts

- name: Install brews
  community.general.homebrew:
    name:
      - git
      - fnm
      - neovim
      - zoxide
      - fzf
      - lsd
      - htop
      - bat
      - fd
      - zsh-syntax-highlighting
      - zsh-autosuggestions
      - powerlevel10k
      - ripgrep
      - python
      - chezmoi
      - docker
      - docker-compose
      - colima

- name: Install casks
  community.general.homebrew_cask:
    name:
      - firefox
      - brave-browser
      - google-chrome
      - microsoft-edge
      - visual-studio-code
      - alacritty
      - swiftdefaultappsprefpane
      - bitwarden
      - adobe-acrobat-reader
      - microsoft-teams
      - microsoft-outlook
      - microsoft-word
      - microsoft-excel
      - microsoft-powerpoint
      - font-hack-nerd-font
      - tableplus

- name: Check if colima service is started
  ansible.builtin.shell: "if [[ \"$(brew services list | grep colima | awk '{ print $2 }')\" == \"started\" ]]; then echo \"true\"; else echo \"false\"; fi"
  register: is_colima_service_started
  changed_when: is_colima_service_started.stdout == "false"

- name: Start colima service
  ansible.builtin.command: brew services start colima
  when: is_colima_service_started.stdout == "false"
